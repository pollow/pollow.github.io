<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>pollow's blog - JUnit</title>
        <link rel="stylesheet" href="http://pollow.github.io/theme/css/main.css" />
        <link href="http://pollow.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="pollow's blog Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a href="http://github.com/pollow/">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="http://pollow.github.io/">pollow's blog </a></h1>
                <nav><ul>
                    <li><a href="/tags">Tags</a></li>
                    <li><a href="/archives">Archives</a></li>
                    <li><a href="http://pollow.github.io/category/android.html">Android</a></li>
                    <li><a href="http://pollow.github.io/category/diary.html">Diary</a></li>
                    <li><a href="http://pollow.github.io/category/java.html">Java</a></li>
                    <li><a href="http://pollow.github.io/category/vcs.html">VCS</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://pollow.github.io/java-web-de-ce-shi.html">Java Web 的测试</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-01-23T00:00:00+08:00">
                Published: 六 23 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://pollow.github.io/author/xing-chang.html">XING Chang</a>
        </address>
<p>In <a href="http://pollow.github.io/category/java.html">Java</a>.</p>
<p>tags: <a href="http://pollow.github.io/tag/java.html">Java</a> <a href="http://pollow.github.io/tag/junit.html">JUnit</a> </p>
</footer><!-- /.post-info --><p>前几天研究了 Java Web 中如何利用 log4j 记录 log，方便追踪少见的错误和异常，更加优雅的拜托 stdout 来 debug。这几天主要要钻研一下如何在一个 Java Web 的大型系统中优雅的做测试，包括单元测试和集成测试。</p>
<p>由于工程庞大，错综复杂，而且目前一直处于在线调试的状态，缺少各种基础设施，所以加入测试难度颇高，今天简单的搜索了一下，检索到了一些关键技术和工具，暂作记录，空下来后慢慢研究。</p>
<ol>
<li>JUnit 4 -- StrutsSpringJUnit4TestCase</li>
<li><a href="http://watij.com/">Watji</a></li>
<li>h2 in-memory database</li>
<li>Mock Class</li>
</ol>
<p>感觉想要成功的为整套系统加入测试，对于很多 Java 的概念和框架还需要深入学习，目前看来，遇到 IoR 和 Bean 相关的概念时还是有些不明所以。</p>
<p>想要进行单元测试，有几个问题需要解决</p>
<ol>
<li>如何模拟 Request 请求</li>
<li>如何判断请求处理是否正常</li>
<li>如何劫持 Hibernate 的数据库操作</li>
</ol>
<p>关于第一三两个问题，StackOverflow 上很多答案都提到了 Mock Class 的概念，似乎是利用了 IoR 区分了开发和部署环境下 Hibernate 的行为。为了更好的理解这些用法，还需要对 Spring Core 进行深入的研究。</p>
<p>说白了 SSH 经典框架我现在就研究了 Struts2，还总被坑奇怪的地方坑。</p>
<p>Watji 是一个通过模拟浏览器行为，加入断言库来进行测试的框架，优点在于可以测试页面在浏览器中的行为，可能还可以处理 JavaScript 页面的展示问题。问题在于，现在的系统大量使用了 iframe 的嵌套，但是我在 API 中没有看到对于 iframe 如何进行分析。</p>
<p>其次还需要把整个工程的几个G代码全都拿来梳理/整理一遍，重新设计工程结构，方便本地开发、调试、测试和发布，这么看来，还应该学习一下 Gradle 的用法。</p>
<p>简单的记录了一下这几天的学习，都是一些技术性上的问题，但是在处理 legacy code 的问题上，还需要学习一些哲学上和概念上的思路。买了本《重构》已经在路上了，任重而道远。</p>
<p>总之，Java 最擅长创造名词……</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="#">You can modify those links in your config file</a></li>
                            <li><a href=""></a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://pollow.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://www.facebook.com/pollow.xc">Facebook</a></li>
                            <li><a href="http://github.com/ametaireau">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>